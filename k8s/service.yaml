apiVersion: v1
kind: Service
metadata:
  name: harmony-frontend-service
  namespace: harmony
  labels:
    app: harmony-frontend
spec:
  type: ClusterIP
  selector:
    app: harmony-frontend
  ports:
    - name: http
      port: 80
      targetPort: 3000
      protocol: TCP
  sessionAffinity: ClientIP
  sessionAffinityConfig:
    clientIP:
      timeoutSeconds: 3600

---
apiVersion: v1
kind: Service
metadata:
  name: harmony-backend-service
  namespace: harmony
  labels:
    app: harmony-backend
spec:
  type: ClusterIP
  selector:
    app: harmony-backend
  ports:
    - name: http
      port: 80
      targetPort: 5000
      protocol: TCP
  sessionAffinity: ClientIP
  sessionAffinityConfig:
    clientIP:
      timeoutSeconds: 3600

---
apiVersion: v1
kind: Service
metadata:
  name: harmony-worker-service
  namespace: harmony
  labels:
    app: harmony-worker
spec:
  type: ClusterIP
  selector:
    app: harmony-worker
  ports:
    - name: http
      port: 80
      targetPort: 5000
      protocol: TCP

---
apiVersion: v1
kind: Service
metadata:
  name: harmony-ai-service-service
  namespace: harmony
  labels:
    app: harmony-ai-service
spec:
  type: ClusterIP
  selector:
    app: harmony-ai-service
  ports:
    - name: http
      port: 80
      targetPort: 8000
      protocol: TCP

---
apiVersion: v1
kind: Service
metadata:
  name: harmony-redis-service
  namespace: harmony
  labels:
    app: harmony-redis
spec:
  type: ClusterIP
  selector:
    app: harmony-redis
  ports:
    - name: redis
      port: 6379
      targetPort: 6379
      protocol: TCP

---
apiVersion: v1
kind: Service
metadata:
  name: harmony-mongodb-service
  namespace: harmony
  labels:
    app: harmony-mongodb
spec:
  type: ClusterIP
  selector:
    app: harmony-mongodb
  ports:
    - name: mongodb
      port: 27017
      targetPort: 27017
      protocol: TCP

---
apiVersion: v1
kind: Service
metadata:
  name: harmony-elasticsearch-service
  namespace: harmony
  labels:
    app: harmony-elasticsearch
spec:
  type: ClusterIP
  selector:
    app: harmony-elasticsearch
  ports:
    - name: http
      port: 9200
      targetPort: 9200
      protocol: TCP
    - name: transport
      port: 9300
      targetPort: 9300
      protocol: TCP

---
apiVersion: v1
kind: Service
metadata:
  name: harmony-rabbitmq-service
  namespace: harmony
  labels:
    app: harmony-rabbitmq
spec:
  type: ClusterIP
  selector:
    app: harmony-rabbitmq
  ports:
    - name: amqp
      port: 5672
      targetPort: 5672
      protocol: TCP
    - name: management
      port: 15672
      targetPort: 15672
      protocol: TCP

---
apiVersion: v1
kind: Service
metadata:
  name: harmony-prometheus-service
  namespace: harmony
  labels:
    app: harmony-prometheus
spec:
  type: ClusterIP
  selector:
    app: harmony-prometheus
  ports:
    - name: http
      port: 9090
      targetPort: 9090
      protocol: TCP

---
apiVersion: v1
kind: Service
metadata:
  name: harmony-grafana-service
  namespace: harmony
  labels:
    app: harmony-grafana
spec:
  type: ClusterIP
  selector:
    app: harmony-grafana
  ports:
    - name: http
      port: 3000
      targetPort: 3000
      protocol: TCP

---
apiVersion: v1
kind: Service
metadata:
  name: harmony-ingress-service
  namespace: harmony
  labels:
    app: harmony-ingress
spec:
  type: NodePort
  selector:
    app: harmony-ingress
  ports:
    - name: http
      port: 80
      targetPort: 80
      protocol: TCP
      nodePort: 30080
    - name: https
      port: 443
      targetPort: 443
      protocol: TCP
      nodePort: 30443

---
apiVersion: v1
kind: Service
metadata:
  name: harmony-frontend-external-service
  namespace: harmony
  labels:
    app: harmony-frontend
spec:
  type: LoadBalancer
  selector:
    app: harmony-frontend
  ports:
    - name: http
      port: 80
      targetPort: 3000
      protocol: TCP
    - name: https
      port: 443
      targetPort: 3000
      protocol: TCP
  externalTrafficPolicy: Local
  loadBalancerIP: 192.168.1.100